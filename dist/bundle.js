module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(2);var u=void 0,c=void 0,s=void 0,l=void 0,d=void 0,f=void 0,v=void 0,h={microphone:!0,audioFile:!1,callback:null,returnNote:!0,returnCents:!1,decimals:2},g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.args=t,this.lastFrequency=null,this.audioContext=null,this.analysePitch=this.analysePitch.bind(this),this.streamReceived=this.streamReceived.bind(this),this.initialize()}return o(e,[{key:"closeContext",value:function(e){e&&this.audioContext.close().then(function(){return e()})}},{key:"initialize",value:function(){this.audioContext=(0,i.detectAudioContext)(),u=(0,i.detectGetUserMedia)(),this instanceof e||(0,a.throwError)("constructor needs to be called with the 'new' keyword"),this.args.callback||(0,a.throwError)("A callback needs to be passed"),this.audioContext||(0,a.logError)("Your browser does not support Audio Context"),u||(0,a.logError)("Your brower does not support getUserMedia"),h=r({},h,this.args),u({audio:!0}).then(this.streamReceived).catch(a.throwError)}},{key:"analysePitch",value:function(){c.connect(v),s.getFloatFrequencyData(d),s.getByteTimeDomainData(f);var e=(0,a.calculateFrequency)(d);if(e){var t=h,n=t.returnCents,r=t.returnNote,o=t.decimals,i=(t.callback,{frequency:(0,a.toDecimals)(e,o)});if(r){var u=(0,a.calculateNote)(e);i.note=u}if(r&&n){if(this.lastFrequency){var l=(0,a.calculateCents)(e,this.lastFrequency);i.cents=(0,a.toDecimals)(l,o)}this.lastFrequency=e}return c.disconnect(v),i}return c.disconnect(v),-1}},{key:"streamReceived",value:function(e){l=e,s=this.audioContext.createAnalyser(),d=new Float32Array(s.frequencyBinCount),f=new Uint8Array(s.frequencyBinCount),v=this.audioContext.createGain(),(c=this.audioContext.createMediaStreamSource(l)).connect(s)}}]),e}();e.exports=g},function(e,t,n){"use strict";var r=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};e.exports={detectAudioContext:function(){return window.AudioContext=window.AudioContext||window.webkitAudioContext,!!window.AudioContext&&new window.AudioContext},detectGetUserMedia:function(){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia)&&(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices):r)}}},function(e,t,n){"use strict";var r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=Math.round(440*Math.pow(2,-4.75)),i=function(e){return 12*Math.log2(e/o)};e.exports={calculateFrequency:function(e,t){var n=22050/1024;t&&t.rate&&(n=t.rate);for(var r=void 0,o=e[0],i=0;e.length>i;i++){var a=parseFloat(o),u=Math.max(o,e[i]);a!=u&&(o=u,r=i)}return r*n},calculateSemiTone:i,calculateCents:function(e,t){return 1200*Math.log2(t/e)},calculateNote:function(e){var t=i(e),n=function(e){return Math.floor(e/12)}(t),o=Math.floor(t%12);return r[o]+String(n)},toDecimals:function(e,t){return"number"!=typeof t?e:e.toFixed(t)},throwError:function(e){throw new Error("Something went wrong: "+e)},logError:function(e){console.error(e)}}}]);
//# sourceMappingURL=bundle.js.map